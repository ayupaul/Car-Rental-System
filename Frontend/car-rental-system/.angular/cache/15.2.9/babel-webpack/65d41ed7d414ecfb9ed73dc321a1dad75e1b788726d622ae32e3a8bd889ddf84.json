{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/user-service.service\";\nimport * as i3 from \"src/app/services/car.service\";\nimport * as i4 from \"@angular/forms\";\nexport class RentalAgreementComponent {\n  constructor(router, userService, carService) {\n    this.router = router;\n    this.userService = userService;\n    this.carService = carService;\n    this.userName = this.userService.getUserNameFromToken();\n    console.log(this.userName);\n    this.router.params.subscribe(params => {\n      console.log(params);\n      this.carId = params['carId'];\n      this.startDate = params['startDate'];\n      this.endDate = params['endDate'];\n      const startDateToDateTime = new Date(this.startDate);\n      const endDateToDateTime = new Date(this.endDate);\n      const timeDifference = endDateToDateTime.getTime() - startDateToDateTime.getTime();\n      this.rentalDuration = Math.ceil(timeDifference / (1000 * 24 * 3600));\n    });\n  }\n  ngOnInit() {\n    this.carService.getCarById(this.carId).subscribe(res => {\n      this.carDetails = res;\n      const numericPrice = parseFloat(this.carDetails.rentalPrice.replace('$', ''));\n      this.totalCost = numericPrice * this.rentalDuration;\n    }, error => {\n      console.log(error);\n    });\n  }\n}\n_class = RentalAgreementComponent;\n_class.ɵfac = function RentalAgreementComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UserServiceService), i0.ɵɵdirectiveInject(i3.CarService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-rental-agreement\"]],\n  decls: 41,\n  vars: 9,\n  consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"table\", \"table-striped\"], [\"type\", \"date\", 3, \"ngModel\", \"min\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"href\", \"#\", 1, \"btn\", \"btn-primary\"]],\n  template: function RentalAgreementComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2, \" Featured \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"h5\", 3);\n      i0.ɵɵtext(5, \"Car Agreement\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"table\", 4)(7, \"thead\")(8, \"tr\")(9, \"th\");\n      i0.ɵɵtext(10, \"User Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"th\");\n      i0.ɵɵtext(12, \"Car Maker\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"th\");\n      i0.ɵɵtext(14, \"Car Model\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Total Cost\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"Start Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"th\");\n      i0.ɵɵtext(20, \"End Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"th\");\n      i0.ɵɵtext(22, \"Book\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(23, \"tbody\")(24, \"td\");\n      i0.ɵɵtext(25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"td\");\n      i0.ɵɵtext(27);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"td\");\n      i0.ɵɵtext(29);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"td\");\n      i0.ɵɵtext(31);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"td\")(33, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function RentalAgreementComponent_Template_input_ngModelChange_33_listener($event) {\n        return ctx.startDate = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(34, \"td\")(35, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function RentalAgreementComponent_Template_input_ngModelChange_35_listener($event) {\n        return ctx.endDate = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(36, \"td\")(37, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function RentalAgreementComponent_Template_button_click_37_listener() {\n        return ctx.onBook(ctx.car.carId, ctx.car.startDate, ctx.car.endDate);\n      });\n      i0.ɵɵtext(38, \"Book\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(39, \"a\", 7);\n      i0.ɵɵtext(40, \"Go somewhere\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(25);\n      i0.ɵɵtextInterpolate(ctx.userName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.carDetails.maker);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.carDetails.model);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate2(\"Rental Price * Rental Duration:\", ctx.car.rentalPrice * ctx.rentalDuration, \":\", ctx.totalCost, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.startDate)(\"min\", ctx.currentDate);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.endDate)(\"min\", ctx.currentDate);\n    }\n  },\n  dependencies: [i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["RentalAgreementComponent","constructor","router","userService","carService","userName","getUserNameFromToken","console","log","params","subscribe","carId","startDate","endDate","startDateToDateTime","Date","endDateToDateTime","timeDifference","getTime","rentalDuration","Math","ceil","ngOnInit","getCarById","res","carDetails","numericPrice","parseFloat","rentalPrice","replace","totalCost","error","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\ayushpal\\Dotnet-MiniAssignment\\Frontend\\car-rental-system\\src\\app\\components\\rental-agreement\\rental-agreement.component.ts","C:\\Users\\ayushpal\\Dotnet-MiniAssignment\\Frontend\\car-rental-system\\src\\app\\components\\rental-agreement\\rental-agreement.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CarService } from 'src/app/services/car.service';\nimport { UserServiceService } from 'src/app/services/user-service.service';\n\n@Component({\n  selector: 'app-rental-agreement',\n  templateUrl: './rental-agreement.component.html',\n  styleUrls: ['./rental-agreement.component.css']\n})\nexport class RentalAgreementComponent implements OnInit {\n  carId:any;\n  startDate:any;\n  endDate:any;\n  userName:any\n  rentalDuration:any\n  totalCost:any\n  carDetails:any\n  constructor(private router:ActivatedRoute,private userService:UserServiceService,private carService:CarService){\n    this.userName=this.userService.getUserNameFromToken();\n    console.log(this.userName);\n    this.router.params.subscribe(params=>{\n      console.log(params);\n      this.carId=params['carId'];\n      this.startDate=params['startDate'];\n      this.endDate=params['endDate'];\n      const startDateToDateTime=new Date(this.startDate);\n      const endDateToDateTime=new Date(this.endDate);\n      const timeDifference=endDateToDateTime.getTime()-startDateToDateTime.getTime();\n      this.rentalDuration=Math.ceil(timeDifference/(1000*24*3600));\n  })\n}\n  ngOnInit(): void {\n    this.carService.getCarById(this.carId).subscribe((res)=>{\n     this.carDetails=res;\n     const numericPrice=parseFloat(this.carDetails.rentalPrice.replace('$',''));\n     this.totalCost=numericPrice*this.rentalDuration;\n    },\n    (error)=>{\n      console.log(error);\n    })\n    \n  }\n}\n \n  \n","<div class=\"card\">\n    <div class=\"card-header\">\n      Featured\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Car Agreement</h5>\n      <table class=\"table table-striped\">\n        <thead>\n          <tr>\n            <th>User Email</th>\n            <th>Car Maker</th>\n            <th>Car Model</th>\n            <th>Total Cost</th>\n            <th>Start Date</th>\n            <th>End Date</th>\n            <th>Book</th>\n          </tr>\n        </thead>\n        <tbody>\n          <td>{{userName}}</td>\n          <td>{{carDetails.maker}}</td>\n          <td>{{carDetails.model}}</td>\n          <td>Rental Price * Rental Duration:{{car.rentalPrice*rentalDuration}}:{{totalCost}}</td>\n          <td><input type=\"date\" [(ngModel)]=\"startDate\" [min]=\"currentDate\"></td>\n          <td><input type=\"date\" [(ngModel)]=\"endDate\" [min]=\"currentDate\"></td>\n          <td><button class=\"btn btn-primary\" (click)=\"onBook(car.carId,car.startDate,car.endDate)\">Book</button></td>\n        </tbody>\n      </table>\n      <a href=\"#\" class=\"btn btn-primary\">Go somewhere</a>\n    </div>\n  </div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}