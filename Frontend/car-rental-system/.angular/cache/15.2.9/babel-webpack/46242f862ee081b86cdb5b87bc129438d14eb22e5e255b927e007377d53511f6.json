{"ast":null,"code":"var _class;\nimport { DatePipe } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user-service.service\";\nimport * as i2 from \"src/app/services/user-store.service\";\nimport * as i3 from \"src/app/services/car.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction DashboardComponent_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const maker_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", maker_r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(maker_r4);\n  }\n}\nfunction DashboardComponent_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const model_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", model_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(model_r5);\n  }\n}\nfunction DashboardComponent_option_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const model_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", model_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(model_r6);\n  }\n}\nfunction DashboardComponent_div_27_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Start Date\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_27_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"End Date\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_27_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Book\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_27_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Actions\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_27_tr_16_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_div_27_tr_16_td_7_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const car_r12 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(car_r12.startDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const car_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", car_r12.startDate)(\"min\", ctx_r13.currentDate);\n  }\n}\nfunction DashboardComponent_div_27_tr_16_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_div_27_tr_16_td_8_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const car_r12 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(car_r12.endDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const car_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", car_r12.endDate)(\"min\", ctx_r14.currentDate);\n  }\n}\nfunction DashboardComponent_div_27_tr_16_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_27_tr_16_td_9_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const car_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.onBook(car_r12.carId, car_r12.startDate, car_r12.endDate));\n    });\n    i0.ɵɵtext(2, \"Book\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardComponent_div_27_tr_16_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_27_tr_16_td_10_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const car_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r28.editCar(car_r12.carId));\n    });\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_27_tr_16_td_10_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const car_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r31 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r31.deleteACar(car_r12.carId));\n    });\n    i0.ɵɵtext(4, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardComponent_div_27_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, DashboardComponent_div_27_tr_16_td_7_Template, 2, 2, \"td\", 18);\n    i0.ɵɵtemplate(8, DashboardComponent_div_27_tr_16_td_8_Template, 2, 2, \"td\", 18);\n    i0.ɵɵtemplate(9, DashboardComponent_div_27_tr_16_td_9_Template, 3, 0, \"td\", 18);\n    i0.ɵɵtemplate(10, DashboardComponent_div_27_tr_16_td_10_Template, 5, 0, \"td\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const car_r12 = ctx.$implicit;\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(car_r12.maker);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(car_r12.model);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(car_r12.rentalPrice);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.getRole == \"User\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.getRole == \"User\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.getRole == \"User\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.getRole == \"Admin\");\n  }\n}\nfunction DashboardComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16)(2, \"table\", 17)(3, \"thead\")(4, \"tr\")(5, \"th\");\n    i0.ɵɵtext(6, \"Maker\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Model\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, DashboardComponent_div_27_th_11_Template, 2, 0, \"th\", 18);\n    i0.ɵɵtemplate(12, DashboardComponent_div_27_th_12_Template, 2, 0, \"th\", 18);\n    i0.ɵɵtemplate(13, DashboardComponent_div_27_th_13_Template, 2, 0, \"th\", 18);\n    i0.ɵɵtemplate(14, DashboardComponent_div_27_th_14_Template, 2, 0, \"th\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"tbody\");\n    i0.ɵɵtemplate(16, DashboardComponent_div_27_tr_16_Template, 11, 7, \"tr\", 19);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.getRole == \"User\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.getRole == \"User\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.getRole == \"User\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.getRole == \"Admin\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.carDetailswithDate);\n  }\n}\nexport class DashboardComponent {\n  constructor(userService, userStoreService, carService, route) {\n    this.userService = userService;\n    this.userStoreService = userStoreService;\n    this.carService = carService;\n    this.route = route;\n    this.none = null;\n    this.selectedMaker = null;\n    this.selectedModel = null;\n    this.selectedPrice = null;\n    this.makers = new Set();\n    this.models = new Set();\n    this.carService.getAllCars().subscribe(res => {\n      this.allCars = res;\n      console.log(this.allCars);\n      this.allCars.forEach(car => {\n        this.makers.add(car.maker);\n        this.models.add(car.model);\n      });\n    }, error => {\n      console.log(error);\n    });\n  }\n  ngOnInit() {\n    const userPayload = this.userService.decodedToken();\n    this.userStoreService.setData(userPayload);\n    this.getRole = this.userService.getRoleFromToken();\n    this.userStoreService.setData(this.getRole);\n    const datePipe = new DatePipe('en-US');\n    this.currentDate = datePipe.transform(new Date(), 'yyyy-MM-dd');\n  }\n  onBook(carId, startDate, endDate) {\n    const startDates = new Date(startDate);\n    const endDates = new Date(endDate);\n    const carAgreementDetails = {\n      startDate: \"\",\n      endDate: \"\",\n      carId: 0\n    };\n    carAgreementDetails.startDate = startDate;\n    carAgreementDetails.endDate = endDate;\n    carAgreementDetails.carId = carId;\n    this.carService.checkBooking(carAgreementDetails).subscribe(res => {\n      if (res === true) {\n        alert(\"Car is already booked in the selected date\");\n      } else {\n        this.route.navigate([\"rental-agreement\", carId, startDate, endDate]);\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n  filterData() {\n    const filteredData = {\n      maker: null,\n      model: null,\n      rentalPrice: null\n    };\n    filteredData.maker = this.selectedMaker;\n    filteredData.model = this.selectedModel;\n    filteredData.rentalPrice = this.selectedPrice;\n    this.carService.searchCar(filteredData).subscribe(res => {\n      console.log(res);\n      this.carDetails = res;\n      this.carDetailswithDate = this.carDetails.map(car => ({\n        ...car,\n        startDate: this.startDate,\n        endDate: this.endDate\n      }));\n    }, error => {\n      console.log(error);\n    });\n  }\n  editCar(id) {\n    this.route.navigate(['edit-car', id]);\n  }\n  deleteACar(id) {\n    this.carService.deleteACar(id).subscribe(res => {\n      console.log(res);\n      alert(\"Deleted Successfully...\");\n      window.location.reload();\n    }, error => {\n      console.log(error);\n    });\n  }\n}\n_class = DashboardComponent;\n_class.ɵfac = function DashboardComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.UserServiceService), i0.ɵɵdirectiveInject(i2.UserStoreService), i0.ɵɵdirectiveInject(i3.CarService), i0.ɵɵdirectiveInject(i4.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-dashboard\"]],\n  decls: 28,\n  vars: 7,\n  consts: [[1, \"container\", \"mt-4\"], [1, \"row\"], [1, \"col-md-4\"], [\"for\", \"maker\"], [\"id\", \"maker\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"null\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"model\"], [\"id\", \"model\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"price\"], [\"id\", \"price\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"row\", \"mt-2\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"class\", \"row mt-3\", 4, \"ngIf\"], [3, \"value\"], [1, \"row\", \"mt-3\"], [1, \"col-md-12\"], [1, \"table\", \"table-striped\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"date\", 3, \"ngModel\", \"min\", \"ngModelChange\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function DashboardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"label\", 3);\n      i0.ɵɵtext(4, \"Maker:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_select_ngModelChange_5_listener($event) {\n        return ctx.selectedMaker = $event;\n      });\n      i0.ɵɵelementStart(6, \"option\", 5);\n      i0.ɵɵtext(7, \"Select\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(8, DashboardComponent_option_8_Template, 2, 2, \"option\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\", 2)(10, \"label\", 7);\n      i0.ɵɵtext(11, \"Model:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"select\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_select_ngModelChange_12_listener($event) {\n        return ctx.selectedModel = $event;\n      });\n      i0.ɵɵelementStart(13, \"option\", 5);\n      i0.ɵɵtext(14, \"Select\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(15, DashboardComponent_option_15_Template, 2, 2, \"option\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 2)(17, \"label\", 9);\n      i0.ɵɵtext(18, \"Price:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"select\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_select_ngModelChange_19_listener($event) {\n        return ctx.selectedPrice = $event;\n      });\n      i0.ɵɵelementStart(20, \"option\", 5);\n      i0.ɵɵtext(21, \"Select\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(22, DashboardComponent_option_22_Template, 2, 2, \"option\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(23, \"div\", 11)(24, \"div\", 2)(25, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_25_listener() {\n        return ctx.filterData();\n      });\n      i0.ɵɵtext(26, \"Filter\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(27, DashboardComponent_div_27_Template, 17, 5, \"div\", 13);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedMaker);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.makers);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedModel);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.models);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedPrice);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.models);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.carDetails);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel],\n  styles: [\"label[_ngcontent-%COMP%]{\\r\\n    color: whitesmoke;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kYXNoYm9hcmQvZGFzaGJvYXJkLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxpQkFBaUI7QUFDckIiLCJzb3VyY2VzQ29udGVudCI6WyJsYWJlbHtcclxuICAgIGNvbG9yOiB3aGl0ZXNtb2tlO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["DatePipe","i0","DashboardComponent","constructor","userService","userStoreService","carService","route","makers","Set","models","getAllCars","subscribe","res","allCars","console","log","forEach","car","add","maker","model","error","ngOnInit","userPayload","decodedToken","setData","getRole","getRoleFromToken","datePipe","currentDate","transform","Date","onBook","carId","startDate","endDate","startDates","endDates","carAgreementDetails","checkBooking","alert","navigate","filterData","filteredData","rentalPrice","selectedMaker","selectedModel","selectedPrice","searchCar","carDetails","carDetailswithDate","map","editCar","id","deleteACar","window","location","reload","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\ayushpal\\Dotnet-MiniAssignment\\Frontend\\car-rental-system\\src\\app\\components\\dashboard\\dashboard.component.ts","C:\\Users\\ayushpal\\Dotnet-MiniAssignment\\Frontend\\car-rental-system\\src\\app\\components\\dashboard\\dashboard.component.html"],"sourcesContent":["import { DatePipe } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { CarService } from 'src/app/services/car.service';\nimport { UserServiceService } from 'src/app/services/user-service.service';\nimport { UserStoreService } from 'src/app/services/user-store.service';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css'],\n})\nexport class DashboardComponent implements OnInit {\n  none=null\n  carDetails:any\n  startDate:any\n  endDate:any\n  getRole:any\n  allCars:any\n  carDetailswithDate:any\n  currentDate:any\n  selectedMaker: any = null;\n  selectedModel: any = null;\n  selectedPrice: any=null;\n  newAddedCar:any\n  makers: any; \n  models: any; \n\n  \n\n  constructor(\n    private userService: UserServiceService,\n    private userStoreService: UserStoreService,\n    private carService:CarService,\n    private route:Router,\n  \n  ) {\n    this.makers=new Set();\n    this.models=new Set();\n    this.carService.getAllCars().subscribe((res)=>{\n      this.allCars=res;\n      console.log(this.allCars);\n    this.allCars.forEach((car:any) => {\n      this.makers.add(car.maker);\n      this.models.add(car.model);\n    });\n    },(error)=>{\n      console.log(error);\n    })\n   \n    \n\n    \n  }\n  ngOnInit(): void {\n    const userPayload = this.userService.decodedToken();\n    this.userStoreService.setData(userPayload);\n    this.getRole=this.userService.getRoleFromToken();\n    this.userStoreService.setData(this.getRole);\n    const datePipe = new DatePipe('en-US');\n    this.currentDate=datePipe.transform(new Date(),'yyyy-MM-dd');\n    \n    \n    \n  }\n onBook(carId:any,startDate:any,endDate:any){\n  const startDates=new Date(startDate);\n  const endDates=new Date(endDate);\n  const carAgreementDetails={startDate:\"\",endDate:\"\",carId:0}\n  carAgreementDetails.startDate=startDate;\n  carAgreementDetails.endDate=endDate;\n  carAgreementDetails.carId=carId;\n  this.carService.checkBooking(carAgreementDetails).subscribe((res)=>{\n    if(res===true){\n      alert(\"Car is already booked in the selected date\");\n    }\n    else{\n      this.route.navigate([\"rental-agreement\",carId,startDate,endDate]);\n    }\n  },(error)=>{\n    console.log(error);\n  })\n  \n }\n filterData() {\n\n  const filteredData={maker:null,model:null,rentalPrice:null};\n  filteredData.maker=this.selectedMaker;\n  filteredData.model=this.selectedModel;\n  filteredData.rentalPrice=this.selectedPrice;\n  this.carService.searchCar(filteredData).subscribe((res)=>{\n   console.log(res);\n   this.carDetails=res;\n   this.carDetailswithDate=this.carDetails.map((car:any)=>({\n     ...car,startDate:this.startDate,endDate:this.endDate\n   }))\n  },(error)=>{\n   console.log(error);\n  })\n }\n editCar(id:any){\n  this.route.navigate(['edit-car',id]);\n }\n deleteACar(id:any){\n  this.carService.deleteACar(id).subscribe((res)=>{\n    console.log(res);\n    alert(\"Deleted Successfully...\")\n    window.location.reload();\n  },(error)=>{\n    console.log(error);\n  })\n }\n}\n","<div class=\"container mt-4\">\n    <div class=\"row\">\n      <div class=\"col-md-4\">\n        <label for=\"maker\">Maker:</label>\n        <select id=\"maker\" [(ngModel)]=\"selectedMaker\" class=\"form-control\">\n          <option value=null>Select</option>\n          <option *ngFor=\"let maker of makers\" [value]=\"maker\">{{ maker }}</option>\n        </select>\n       \n      </div>\n  \n      <div class=\"col-md-4\">\n        <label for=\"model\">Model:</label>\n        <select id=\"model\" [(ngModel)]=\"selectedModel\" class=\"form-control\">\n          <option value=null>Select</option>\n          <option *ngFor=\"let model of models\" [value]=\"model\">{{ model }}</option>\n        </select>\n      </div>\n  \n      <div class=\"col-md-4\">\n        <label for=\"price\">Price:</label>\n        <select id=\"price\" [(ngModel)]=\"selectedPrice\" class=\"form-control\">\n          <option value=null>Select</option>\n          <option *ngFor=\"let model of models\" [value]=\"model\">{{ model }}</option>\n          <!-- Add more price ranges as needed -->\n        </select>\n      </div>\n    </div>\n  \n    <div class=\"row mt-2\">\n      <div class=\"col-md-4\">\n        <button (click)=\"filterData()\" class=\"btn btn-primary\">Filter</button>\n      </div>\n    </div>\n  \n    <div class=\"row mt-3\" *ngIf=\"carDetails\">\n      <div class=\"col-md-12\">\n        <table class=\"table table-striped\">\n          <thead>\n            <tr>\n              <th>Maker</th>\n              <th>Model</th>\n              <th>Price</th>\n              <th *ngIf=\"getRole=='User'\">Start Date</th>\n              <th *ngIf=\"getRole=='User'\">End Date</th>\n              <th *ngIf=\"getRole=='User'\">Book</th>\n              <th *ngIf=\"getRole=='Admin'\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let car of carDetailswithDate\">\n              <td>{{ car.maker }}</td>\n              <td>{{ car.model }}</td>\n              <td>{{ car.rentalPrice }}</td>\n              <td *ngIf=\"getRole=='User'\"><input type=\"date\" [(ngModel)]=\"car.startDate\" [min]=\"currentDate\"></td>\n              <td *ngIf=\"getRole=='User'\"><input type=\"date\" [(ngModel)]=\"car.endDate\" [min]=\"currentDate\"></td>\n              <td *ngIf=\"getRole=='User'\"><button class=\"btn btn-primary\" (click)=\"onBook(car.carId,car.startDate,car.endDate)\">Book</button></td>\n              <td *ngIf=\"getRole=='Admin'\"><button class=\"btn btn-primary\" (click)=\"editCar(car.carId)\">Edit</button>\n                  <button class=\"btn btn-danger\" (click)=\"deleteACar(car.carId)\">Delete</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}