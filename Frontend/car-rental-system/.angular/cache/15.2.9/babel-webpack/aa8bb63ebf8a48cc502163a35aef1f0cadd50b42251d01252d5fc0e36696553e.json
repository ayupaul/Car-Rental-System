{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/user-service.service\";\nimport * as i3 from \"src/app/services/car.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction RentalAgreementComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function RentalAgreementComponent_tr_22_Template_input_ngModelChange_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const car_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(car_r1.startDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"td\")(10, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function RentalAgreementComponent_tr_22_Template_input_ngModelChange_10_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const car_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(car_r1.endDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function RentalAgreementComponent_tr_22_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const car_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onBook(car_r1.carId, car_r1.startDate, car_r1.endDate));\n    });\n    i0.ɵɵtext(13, \"Book\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const car_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(car_r1.maker);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(car_r1.model);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(car_r1.rentalPrice);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", car_r1.startDate)(\"min\", ctx_r0.currentDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", car_r1.endDate)(\"min\", ctx_r0.currentDate);\n  }\n}\nexport class RentalAgreementComponent {\n  constructor(router, userService, carService) {\n    this.router = router;\n    this.userService = userService;\n    this.carService = carService;\n    this.userName = this.userService.getUserNameFromToken();\n    console.log(this.userName);\n    this.router.params.subscribe(params => {\n      console.log(params);\n      this.carId = params['carId'];\n      this.startDate = params['startDate'];\n      this.endDate = params['endDate'];\n      const startDateToDateTime = new Date(this.startDate);\n      const endDateToDateTime = new Date(this.endDate);\n      const timeDifference = endDateToDateTime.getTime() - startDateToDateTime.getTime();\n      this.rentalDuration = Math.ceil(timeDifference / (1000 * 24 * 3600));\n    });\n  }\n  ngOnInit() {\n    this.carService.getCarById(this.carId).subscribe(res => {\n      this.carDetails = res;\n      const numericPrice = parseFloat(this.carDetails.rentalPrice.replace('$', ''));\n      this.totalCost = numericPrice * this.rentalDuration;\n    }, error => {\n      console.log(error);\n    });\n  }\n}\n_class = RentalAgreementComponent;\n_class.ɵfac = function RentalAgreementComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UserServiceService), i0.ɵɵdirectiveInject(i3.CarService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-rental-agreement\"]],\n  decls: 25,\n  vars: 1,\n  consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [\"href\", \"#\", 1, \"btn\", \"btn-primary\"], [\"type\", \"date\", 3, \"ngModel\", \"min\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function RentalAgreementComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2, \" Featured \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"h5\", 3);\n      i0.ɵɵtext(5, \"Car Agreement\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"table\", 4)(7, \"thead\")(8, \"tr\")(9, \"th\");\n      i0.ɵɵtext(10, \"User Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"th\");\n      i0.ɵɵtext(12, \"Car Maker\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"th\");\n      i0.ɵɵtext(14, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Start Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"End Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"th\");\n      i0.ɵɵtext(20, \"Book\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(21, \"tbody\");\n      i0.ɵɵtemplate(22, RentalAgreementComponent_tr_22_Template, 14, 7, \"tr\", 5);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"a\", 6);\n      i0.ɵɵtext(24, \"Go somewhere\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(22);\n      i0.ɵɵproperty(\"ngForOf\", ctx.carDetailswithDate);\n    }\n  },\n  dependencies: [i4.NgForOf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","RentalAgreementComponent","constructor","router","userService","carService","userName","getUserNameFromToken","console","log","params","subscribe","carId","startDate","endDate","startDateToDateTime","Date","endDateToDateTime","timeDifference","getTime","rentalDuration","Math","ceil","ngOnInit","getCarById","res","carDetails","numericPrice","parseFloat","rentalPrice","replace","totalCost","error","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\ayushpal\\Dotnet-MiniAssignment\\Frontend\\car-rental-system\\src\\app\\components\\rental-agreement\\rental-agreement.component.html","C:\\Users\\ayushpal\\Dotnet-MiniAssignment\\Frontend\\car-rental-system\\src\\app\\components\\rental-agreement\\rental-agreement.component.ts"],"sourcesContent":["<div class=\"card\">\n    <div class=\"card-header\">\n      Featured\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Car Agreement</h5>\n      <table class=\"table table-striped\">\n        <thead>\n          <tr>\n            <th>User Email</th>\n            <th>Car Maker</th>\n            <th>Price</th>\n            <th>Start Date</th>\n            <th>End Date</th>\n            <th>Book</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let car of carDetailswithDate\">\n            <td>{{ car.maker }}</td>\n            <td>{{ car.model }}</td>\n            <td>{{ car.rentalPrice }}</td>\n            <td><input type=\"date\" [(ngModel)]=\"car.startDate\" [min]=\"currentDate\"></td>\n            <td><input type=\"date\" [(ngModel)]=\"car.endDate\" [min]=\"currentDate\"></td>\n            <td><button class=\"btn btn-primary\" (click)=\"onBook(car.carId,car.startDate,car.endDate)\">Book</button></td>\n          </tr>\n        </tbody>\n      </table>\n      <a href=\"#\" class=\"btn btn-primary\">Go somewhere</a>\n    </div>\n  </div>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CarService } from 'src/app/services/car.service';\nimport { UserServiceService } from 'src/app/services/user-service.service';\n\n@Component({\n  selector: 'app-rental-agreement',\n  templateUrl: './rental-agreement.component.html',\n  styleUrls: ['./rental-agreement.component.css']\n})\nexport class RentalAgreementComponent implements OnInit {\n  carId:any;\n  startDate:any;\n  endDate:any;\n  userName:any\n  rentalDuration:any\n  totalCost:any\n  carDetails:any\n  constructor(private router:ActivatedRoute,private userService:UserServiceService,private carService:CarService){\n    this.userName=this.userService.getUserNameFromToken();\n    console.log(this.userName);\n    this.router.params.subscribe(params=>{\n      console.log(params);\n      this.carId=params['carId'];\n      this.startDate=params['startDate'];\n      this.endDate=params['endDate'];\n      const startDateToDateTime=new Date(this.startDate);\n      const endDateToDateTime=new Date(this.endDate);\n      const timeDifference=endDateToDateTime.getTime()-startDateToDateTime.getTime();\n      this.rentalDuration=Math.ceil(timeDifference/(1000*24*3600));\n  })\n}\n  ngOnInit(): void {\n    this.carService.getCarById(this.carId).subscribe((res)=>{\n     this.carDetails=res;\n     const numericPrice=parseFloat(this.carDetails.rentalPrice.replace('$',''));\n     this.totalCost=numericPrice*this.rentalDuration;\n    },\n    (error)=>{\n      console.log(error);\n    })\n    \n  }\n}\n \n  \n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}