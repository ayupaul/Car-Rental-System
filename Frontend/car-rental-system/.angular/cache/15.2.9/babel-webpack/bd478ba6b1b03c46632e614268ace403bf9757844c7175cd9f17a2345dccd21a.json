{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { DatePipe } from '@angular/common';\nimport { Component } from '@angular/core';\nlet RentalAgreementComponent = class RentalAgreementComponent {\n  constructor(router, userService, carService, route) {\n    this.router = router;\n    this.userService = userService;\n    this.carService = carService;\n    this.route = route;\n    this.userName = this.userService.getUserNameFromToken();\n    console.log(this.userName);\n    this.router.params.subscribe(params => {\n      console.log(params);\n      this.carId = params['carId'];\n      this.startDate = params['startDate'];\n      this.endDate = params['endDate'];\n      const startDateToDateTime = new Date(this.startDate);\n      const endDateToDateTime = new Date(this.endDate);\n      const timeDifference = endDateToDateTime.getTime() - startDateToDateTime.getTime();\n      this.rentalDuration = Math.ceil(timeDifference / (1000 * 24 * 3600));\n      const datePipe = new DatePipe('en-US');\n      this.currentDate = datePipe.transform(new Date(), 'yyyy-MM-dd');\n      console.log(this.startDate);\n      console.log(this.endDate);\n    });\n  }\n  ngOnInit() {\n    this.carService.getCarById(this.carId).subscribe(res => {\n      this.carDetails = res;\n      const numericPrice = parseFloat(this.carDetails.rentalPrice.replace('$', ''));\n      this.totalCost = numericPrice * this.rentalDuration;\n    }, error => {\n      console.log(error);\n    });\n  }\n  onBook() {\n    const checkBooking = {\n      startDate: \"\",\n      endDate: \"\",\n      carId: 0\n    };\n    checkBooking.startDate = this.startDate;\n    checkBooking.endDate = this.endDate;\n    checkBooking.carId = this.carId;\n    this.carService.checkBooking(checkBooking).subscribe(res => {\n      if (res === true) {\n        alert(\"Car already booked for the selected date\");\n      } else {\n        const userId = this.userService.getIdFromToken();\n        const carAgreementDetails = {\n          carId: this.carId,\n          userId: userId,\n          totalCost: this.totalCost,\n          startDate: this.startDate,\n          endDate: this.endDate\n        };\n        this.carService.bookCar(carAgreementDetails).subscribe(res => {}, error => {\n          console.log(error);\n        });\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n  updateTotalCost() {\n    if (this.carDetails && this.endDate && this.startDate) {\n      const startDateToDateTime = new Date(this.startDate);\n      const endDateToDateTime = new Date(this.endDate);\n      const timeDifference = endDateToDateTime.getTime() - startDateToDateTime.getTime();\n      this.rentalDuration = Math.ceil(timeDifference / (1000 * 24 * 3600));\n      const numericPrice = parseFloat(this.carDetails.rentalPrice.replace('$', ''));\n      this.totalCost = numericPrice * this.rentalDuration;\n    }\n  }\n};\nRentalAgreementComponent = __decorate([Component({\n  selector: 'app-rental-agreement',\n  templateUrl: './rental-agreement.component.html',\n  styleUrls: ['./rental-agreement.component.css']\n})], RentalAgreementComponent);\nexport { RentalAgreementComponent };","map":{"version":3,"mappings":"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","names":["DatePipe","Component","RentalAgreementComponent","constructor","router","userService","carService","route","userName","getUserNameFromToken","console","log","params","subscribe","carId","startDate","endDate","startDateToDateTime","Date","endDateToDateTime","timeDifference","getTime","rentalDuration","Math","ceil","datePipe","currentDate","transform","ngOnInit","getCarById","res","carDetails","numericPrice","parseFloat","rentalPrice","replace","totalCost","error","onBook","checkBooking","alert","userId","getIdFromToken","carAgreementDetails","bookCar","updateTotalCost","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\ayushpal\\Dotnet-MiniAssignment\\Frontend\\car-rental-system\\src\\app\\components\\rental-agreement\\rental-agreement.component.ts"],"sourcesContent":["import { DatePipe } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CarService } from 'src/app/services/car.service';\nimport { UserServiceService } from 'src/app/services/user-service.service';\n\n@Component({\n  selector: 'app-rental-agreement',\n  templateUrl: './rental-agreement.component.html',\n  styleUrls: ['./rental-agreement.component.css']\n})\nexport class RentalAgreementComponent implements OnInit {\n  carId:any;\n  startDate:any;\n  endDate:any;\n  userName:any\n  rentalDuration:any\n  totalCost:any\n  carDetails:any\n  currentDate:any\n  constructor(private router:ActivatedRoute,private userService:UserServiceService,private carService:CarService,private route:){\n    this.userName=this.userService.getUserNameFromToken();\n    console.log(this.userName);\n    this.router.params.subscribe(params=>{\n      console.log(params);\n      this.carId=params['carId'];\n      this.startDate=params['startDate'];\n      this.endDate=params['endDate'];\n      const startDateToDateTime=new Date(this.startDate);\n      const endDateToDateTime=new Date(this.endDate);\n      const timeDifference=endDateToDateTime.getTime()-startDateToDateTime.getTime();\n      this.rentalDuration=Math.ceil(timeDifference/(1000*24*3600));\n      const datePipe = new DatePipe('en-US');\n    this.currentDate=datePipe.transform(new Date(),'yyyy-MM-dd');\n    console.log(this.startDate)\n    console.log(this.endDate)\n  })\n}\n  ngOnInit(): void {\n    this.carService.getCarById(this.carId).subscribe((res)=>{\n     this.carDetails=res;\n     const numericPrice=parseFloat(this.carDetails.rentalPrice.replace('$',''));\n     this.totalCost=numericPrice*this.rentalDuration;\n    },\n    (error)=>{\n      console.log(error);\n    })\n    \n  }\n  onBook(){\n    const checkBooking={startDate:\"\",endDate:\"\",carId:0};\n    checkBooking.startDate=this.startDate;\n    checkBooking.endDate=this.endDate;\n    checkBooking.carId=this.carId;\n    this.carService.checkBooking(checkBooking).subscribe((res)=>{\n      if(res===true){\n        alert(\"Car already booked for the selected date\");\n      }\n      else{\n        const userId=this.userService.getIdFromToken();\n        const carAgreementDetails={carId:this.carId,userId:userId,totalCost:this.totalCost,startDate:this.startDate,endDate:this.endDate};\n        this.carService.bookCar(carAgreementDetails).subscribe((res)=>{\n          \n        },(error)=>{\n          console.log(error);\n        })\n      }\n    },(error)=>{\n      console.log(error);\n    })\n  }\n  updateTotalCost() {\n    if (this.carDetails && this.endDate && this.startDate) {\n      const startDateToDateTime = new Date(this.startDate);\n      const endDateToDateTime = new Date(this.endDate);\n      const timeDifference = endDateToDateTime.getTime() - startDateToDateTime.getTime();\n      this.rentalDuration = Math.ceil(timeDifference / (1000 * 24 * 3600));\n      const numericPrice = parseFloat(this.carDetails.rentalPrice.replace('$', ''));\n      this.totalCost = numericPrice * this.rentalDuration;\n    }\n  }\n}\n \n  \n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}